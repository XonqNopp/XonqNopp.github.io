<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>I rant therefore I am</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
</head>

<body id="index" class="home">
<a href="https://github.com/XonqNopp/XonqNopp.github.io">
<img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub" />
</a>
        <header id="banner" class="body">
                <h1><a href="/">I rant therefore I am </a></h1>
                <nav><ul>
                    <li><a href="/category/git.html">git</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="/git-sub.html">git sub</a></h1>
<footer class="post-info">
        <abbr class="published" title="2018-12-10T14:34:00+01:00">
                Published: Mon 10 December 2018
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/xonqnopp.html">XonqNopp</a>
        </address>
<p>In <a href="/category/git.html">git</a>.</p>
<p>tags: <a href="/tag/git.html">git</a> </p>
</footer><!-- /.post-info --><p>If you are sharing code in several repository or using third-party code, you are likely to have come to think how to do
it efficiently.
Git provides some ways to do this, but...
All existing solution sucks:</p>
<ul class="simple">
<li>submodule is nice but painful for users, and for beginner developers</li>
<li>subtree is nice but painful for developers since push can be wrong</li>
<li>subrepo is nice but does not allow to change branch easily</li>
</ul>
<p>So I have come to think that sticking to the basics is maybe better.
<strong>Git sub</strong> is a new way to include git repos in a git repo.
It is simply a clone of the other repo into the main repo and we track all files in the main repo as well.
For repositories with more than one developer, I advise to use sub.</p>
<p>You only need to take special action the first time.
I wrote a script for this here:
<a class="reference external" href="https://github.com/XonqNopp/conf/blob/master/git/bin/git-sub-init">https://github.com/XonqNopp/conf/blob/master/git/bin/git-sub-init</a>
This script is only needed the first time:</p>
<pre class="literal-block">
git sub-init my/sub/path/in/repo https://github.com/awesome/repo
</pre>
<ul class="simple">
<li>If you are introducing a new sub, it will clone the repo and stage all files for commit.</li>
<li>If you pulled from the repo and new commits introduce a sub, it will add the .git directory in the sub
so you can easily change branch, commit or anything.</li>
</ul>
<p>Later on, you can also check if there are uncommitted changes with this script:
<a class="reference external" href="https://github.com/XonqNopp/conf/blob/master/git/bin/git-sub-st">https://github.com/XonqNopp/conf/blob/master/git/bin/git-sub-st</a></p>
<div class="section" id="pros">
<h2>Pros</h2>
<ul class="simple">
<li>all files available with a simple clone, no additional arg/command required</li>
</ul>
</div>
<div class="section" id="cons">
<h2>Cons</h2>
<ul class="simple">
<li>if you do changes and commit them in main repo, sub remote won't be update.
You need to cd there and commit-push as well</li>
</ul>
</div>
<div class="section" id="howto-advice">
<h2>HowTo advice</h2>
<ul class="simple">
<li>when changes are required in sub, cd there, do the changes, commit, push, and when state is clean (as opposed to
submodule dirty status), cd back to main repo and commit.
This way you ensure you use only versions of the sub which are available in the remote.
To be sure to have everything synchronized on both repos, you can use <tt class="docutils literal">git <span class="pre">sub-st</span></tt> (see above).</li>
</ul>
</div>
                </article>
            </aside><!-- /#featured -->
        <section id="extras" class="body">
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>